---
title: 'Initialize Run for Saved Agent'
description: 'Initialize a new run for a pre-configured saved agent'
api: 'GET /v1/agents/runs/{agent_id}'
---

# Initialize Run for Saved Agent

The Initialize Run for Saved Agent endpoint creates a new execution instance using a pre-configured saved agent's configuration. This is useful for quickly starting conversations with agents that have been previously set up and saved.

## Request

<RequestExample>
```bash cURL
curl -X GET https://api.yourdomain.com/v1/agents/runs/my-support-agent \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -d "metadata={\"user_id\":\"user_123\",\"source\":\"web_chat\"}"
```

```javascript Node.js
const axios = require('axios');

const apiKey = 'YOUR_API_KEY';
const agentId = 'my-support-agent';

axios.get(`https://api.yourdomain.com/v1/agents/runs/${agentId}`, {
  headers: {
    'Authorization': `Bearer ${apiKey}`
  },
  params: {
    metadata: JSON.stringify({
      user_id: 'user_123',
      source: 'web_chat'
    })
  }
})
.then(response => console.log(response.data))
.catch(error => console.error(error.response.data));
```

```python Python
import requests
import json

api_key = 'YOUR_API_KEY'
agent_id = 'my-support-agent'

headers = {
    'Authorization': f'Bearer {api_key}'
}

params = {
    'metadata': json.dumps({
        'user_id': 'user_123',
        'source': 'web_chat'
    })
}

response = requests.get(
    f'https://api.yourdomain.com/v1/agents/runs/{agent_id}',
    headers=headers,
    params=params
)

print(response.json())
```
</RequestExample>

### Path Parameters

<ParamField path="agent_id" type="string" required>
  The unique identifier for the saved agent.
</ParamField>

### Query Parameters

<ParamField query="metadata" type="object">
  Optional metadata to attach to the run. This should be a JSON-encoded object.
</ParamField>

<ParamField query="initial_message" type="string">
  An optional initial message from the user to start the conversation.
</ParamField>

## Response

<ResponseExample>
```json Success
{
  "id": "run_xyz789abc123",
  "object": "agent.run",
  "status": "queued",
  "agent_id": "my-support-agent",
  "created_at": 1699564800,
  "config": {
    "name": "Support Agent",
    "model": "gpt-4",
    "instructions": "You are a customer support specialist...",
    "tools": ["knowledge_base"],
    "parameters": {
      "temperature": 0.7,
      "max_tokens": 1000
    }
  },
  "messages": [],
  "metadata": {
    "user_id": "user_123",
    "source": "web_chat"
  }
}
```

```json Error
{
  "error": {
    "type": "not_found",
    "message": "Agent with ID 'my-support-agent' not found"
  }
}
```
</ResponseExample>

### Response Fields

<ResponseField name="id" type="string">
  A unique identifier for the run. Use this ID for subsequent operations on this run.
</ResponseField>

<ResponseField name="object" type="string">
  The type of object. Always `agent.run` for run objects.
</ResponseField>

<ResponseField name="status" type="string">
  The current status of the run. For newly initialized runs, this will be `queued`.
</ResponseField>

<ResponseField name="agent_id" type="string">
  The ID of the saved agent used to initialize this run.
</ResponseField>

<ResponseField name="created_at" type="integer">
  Unix timestamp (in seconds) when the run was created.
</ResponseField>

<ResponseField name="config" type="object">
  The agent configuration used for this run. This is copied from the saved agent's configuration.
</ResponseField>

<ResponseField name="messages" type="array">
  An array of message objects representing the conversation history. For a newly initialized run, this will be empty unless an initial message was provided.
</ResponseField>

<ResponseField name="metadata" type="object">
  The metadata attached to this run. This combines any metadata provided in the request with any default metadata from the saved agent.
</ResponseField>

## Error Codes

<AccordionGroup>
  <Accordion title="401: Unauthorized">
    Returned when the API key is missing or invalid.
    
    ```json
    {
      "error": {
        "type": "authentication_error",
        "message": "Invalid API key provided"
      }
    }
    ```
  </Accordion>
  
  <Accordion title="404: Not Found">
    Returned when the specified agent does not exist.
    
    ```json
    {
      "error": {
        "type": "not_found",
        "message": "Agent with ID 'my-support-agent' not found"
      }
    }
    ```
  </Accordion>
  
  <Accordion title="429: Too Many Requests">
    Returned when you've exceeded the rate limit for this endpoint.
    
    ```json
    {
      "error": {
        "type": "rate_limit_exceeded",
        "message": "Rate limit exceeded. Please retry after 2023-11-10T00:01:00Z",
        "retry_after": 45
      }
    }
    ```
  </Accordion>
</AccordionGroup>

## Usage Examples

### Initializing a Run with a Saved Agent

<CodeGroup>
```javascript
const agentId = 'customer-support-agent';

// Initialize a run with the saved agent
const response = await fetch(`https://api.yourdomain.com/v1/agents/runs/${agentId}`, {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${apiKey}`
  }
});

const run = await response.json();
console.log(`Run initialized with ID: ${run.id}`);
console.log(`Using agent: ${run.agent_id}`);

// Store the run ID for later use
const runId = run.id;

// Execute the run to start the conversation
const executeResponse = await fetch(`https://api.yourdomain.com/v1/agents/runs/${runId}/execute`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    message: "Hi, I need help with my subscription."
  })
});

const executionResult = await executeResponse.json();
console.log(executionResult.messages[executionResult.messages.length - 1].content);
```
</CodeGroup>

### Initializing a Run with Metadata and Initial Message

<CodeGroup>
```javascript
const agentId = 'product-recommendation-agent';
const metadata = {
  user_id: 'user_789',
  session_id: 'session_456',
  preferences: {
    category: 'electronics',
    price_range: 'premium'
  }
};
const initialMessage = "I'm looking for a new smartphone.";

// URL encode the metadata and initial message
const params = new URLSearchParams({
  metadata: JSON.stringify(metadata),
  initial_message: initialMessage
});

// Initialize a run with the saved agent
const response = await fetch(`https://api.yourdomain.com/v1/agents/runs/${agentId}?${params}`, {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${apiKey}`
  }
});

const run = await response.json();

// Execute the run to get the agent's response
const executeResponse = await fetch(`https://api.yourdomain.com/v1/agents/runs/${run.id}/execute`, {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({})
});

const executionResult = await executeResponse.json();
console.log(executionResult.messages[executionResult.messages.length - 1].content);
```
</CodeGroup>

## Notes and Best Practices

<Tip>
Saved agents are useful for creating consistent experiences across multiple user sessions. They allow you to reuse the same configuration without having to specify it each time.
</Tip>

<Warning>
The run is initially created with a status of `queued`. You need to call the [Execute Agent Run](/api-reference/agents/delete) endpoint to start processing the run.
</Warning>

<Info>
Saved agents can be managed through the dashboard or via the Agents API (not covered in this documentation).
</Info>

<Check>
You can include metadata to provide context for the agent, such as user information or session details. This can help the agent provide more personalized responses.
</Check>
