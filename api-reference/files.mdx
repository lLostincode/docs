---
title: "Files API"
description: "Upload and manage files for knowledge bases"
---

The Files API allows you to upload, manage, and organize files that can be used in knowledge bases.

## Authentication

All endpoints require authentication using your API key:
- **API Key**: `x-api-key: <key>`

---

## List Files

<ParamField query="GET" path="/api/v1/files/">
  Retrieve all files accessible to the authenticated user
</ParamField>

### Query Parameters

<ParamField query="file_type" type="string">
  Filter by file type: `document`, `image`, `video`, `audio`, `archive`, `code`, `data`, `other`
</ParamField>

<ParamField query="status" type="string">
  Filter by status: `uploading`, `active`, `archived`, `deleted`, `error`
</ParamField>

<ParamField query="search" type="string">
  Search files by filename
</ParamField>

<ParamField query="tags" type="array">
  Filter by tags (can specify multiple)
</ParamField>

<ParamField query="include_deleted" type="boolean">
  Include deleted files in results (default: false)
</ParamField>

### Response

```json
[
  {
    "id": "file_123",
    "original_filename": "product_manual.pdf",
    "file_type": "document",
    "mime_type": "application/pdf",
    "file_size": 2048576,
    "file_size_formatted": "2.0 MB",
    "file_hash": "sha256:abc123...",
    "status": "active",
    "description": "",
    "tags": ["documentation", "products"],
    "is_public": false,
    "processing_metadata": {},
    "file_url": "https://storage.atthene.com/files/file_123",
    "uploaded_by_name": "John Doe",
    "company_name": "Acme Corp",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  }
]
```

### Example

<CodeGroup>
```bash cURL
curl -X GET "https://api-be.atthene.com/api/v1/files/?file_type=document&status=active" \
  -H "x-api-key: YOUR_API_KEY"
```

```python Python
import requests

response = requests.get(
    "https://api-be.atthene.com/api/v1/files/",
    headers={"x-api-key": "YOUR_API_KEY"},
    params={
        "file_type": "document",
        "status": "active"
    }
)
files = response.json()
```
</CodeGroup>

---

## Upload File

<ParamField query="POST" path="/api/v1/files/">
  Upload a new file to the system
</ParamField>

### Request Body (multipart/form-data)

<ParamField body="file" type="file" required>
  The file to upload
</ParamField>

<ParamField body="description" type="string">
  Optional description for the file
</ParamField>

<ParamField body="tags" type="array">
  Optional tags for the file
</ParamField>

<ParamField body="is_public" type="boolean">
  Whether the file is publicly accessible (default: false)
</ParamField>

### Response

```json
{
  "success": true,
  "message": "File uploaded successfully",
  "file": {
    "id": "file_456",
    "original_filename": "company_policy.pdf",
    "file_type": "document",
    "mime_type": "application/pdf",
    "file_size": 1024000,
    "file_size_formatted": "1.0 MB",
    "file_hash": "sha256:abc123...",
    "status": "active",
    "description": "",
    "tags": ["policy", "hr"],
    "is_public": false,
    "processing_metadata": {},
    "file_url": "https://storage.atthene.com/files/file_456",
    "uploaded_by_name": "John Doe",
    "company_name": "Acme Corp",
    "created_at": "2024-01-15T10:35:00Z",
    "updated_at": "2024-01-15T10:35:00Z"
  }
}
```

### Example

<CodeGroup>
```bash cURL
curl -X POST https://api-be.atthene.com/api/v1/files/ \
  -H "x-api-key: YOUR_API_KEY" \
  -F "file=@/path/to/document.pdf" \
  -F "tags=policy,hr"
```

```python Python
import requests

files = {
    'file': open('document.pdf', 'rb')
}
data = {
    'description': 'Company policy document',
    'tags': ['policy', 'hr'],
    'is_public': False
}

response = requests.post(
    "https://api-be.atthene.com/api/v1/files/",
    headers={"x-api-key": "YOUR_API_KEY"},
    files=files,
    data=data
)
file_info = response.json()
print(f"File uploaded: {file_info['id']}")
```

```javascript JavaScript
const formData = new FormData();
formData.append('file', fileInput.files[0]);
formData.append('tags', JSON.stringify(['policy', 'hr']));

const response = await fetch('https://api-be.atthene.com/api/v1/files/', {
  method: 'POST',
  headers: {
    'x-api-key': 'YOUR_API_KEY'
  },
  body: formData
});

const fileInfo = await response.json();
console.log(`File uploaded: ${fileInfo.id}`);
```
</CodeGroup>

<Tip>
The system automatically detects file type, validates the file, and checks for duplicates based on content hash.
</Tip>

---

## Get File Details

<ParamField query="GET" path="/api/v1/files/{id}/">
  Retrieve detailed information about a specific file
</ParamField>

### Path Parameters

<ParamField path="id" type="string" required>
  The file ID
</ParamField>

### Response

```json
{
  "id": "file_123",
  "original_filename": "product_manual.pdf",
  "file_type": "document",
  "mime_type": "application/pdf",
  "file_size": 2048576,
  "file_size_formatted": "2.0 MB",
  "file_hash": "sha256:abc123...",
  "status": "active",
  "description": "Product documentation",
  "tags": ["documentation", "products"],
  "is_public": false,
  "processing_metadata": {
    "pages": 42,
    "author": "John Doe"
  },
  "file_url": "https://storage.atthene.com/files/file_123",
  "uploaded_by_name": "John Doe",
  "company_name": "Acme Corp",
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

### Example

<CodeGroup>
```bash cURL
curl -X GET https://api-be.atthene.com/api/v1/files/file_123/ \
  -H "x-api-key: YOUR_API_KEY"
```

```python Python
import requests

response = requests.get(
    "https://api-be.atthene.com/api/v1/files/file_123/",
    headers={"x-api-key": "YOUR_API_KEY"}
)
file_details = response.json()
```
</CodeGroup>

---

## Delete File

<ParamField query="DELETE" path="/api/v1/files/{id}/">
  Delete a specific file
</ParamField>

### Path Parameters

<ParamField path="id" type="string" required>
  The file ID
</ParamField>

### Response

Returns `204 No Content` on success.

### Example

<CodeGroup>
```bash cURL
curl -X DELETE https://api-be.atthene.com/api/v1/files/file_123/ \
  -H "x-api-key: YOUR_API_KEY"
```

```python Python
import requests

response = requests.delete(
    "https://api-be.atthene.com/api/v1/files/file_123/",
    headers={"x-api-key": "YOUR_API_KEY"}
)
```
</CodeGroup>

---

## Bulk File Operations

<ParamField query="POST" path="/api/v1/files/bulk_action/">
  Perform bulk operations on multiple files
</ParamField>

### Request Body

<ParamField body="action" type="string" required>
  The action to perform: `delete`, `archive`, `make_public`, `make_private`
</ParamField>

<ParamField body="file_ids" type="array" required>
  Array of file IDs to perform the action on
</ParamField>

### Example: Bulk Delete

```json
{
  "action": "delete",
  "file_ids": ["file_123", "file_456", "file_789"]
}
```

### Example: Bulk Make Public

```json
{
  "action": "make_public",
  "file_ids": ["file_123", "file_456"]
}
```

### Response

```json
{
  "success": true,
  "updated_count": 3,
  "errors": []
}
```

### Example

<CodeGroup>
```bash cURL
curl -X POST https://api-be.atthene.com/api/v1/files/bulk_action/ \
  -H "x-api-key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "action": "delete",
    "file_ids": ["file_123", "file_456", "file_789"]
  }'
```

```python Python
import requests

data = {
    "action": "delete",
    "file_ids": ["file_123", "file_456", "file_789"]
}

response = requests.post(
    "https://api-be.atthene.com/api/v1/files/bulk_action/",
    headers={"x-api-key": "YOUR_API_KEY"},
    json=data
)
result = response.json()
print(f"Updated: {result['updated_count']}, Errors: {len(result['errors'])}")
```
</CodeGroup>

---

## File Types

<ResponseField name="file_type" type="string">
  Automatically detected file type:
  
  - `document` - PDF, Word, text files
  - `image` - JPEG, PNG, GIF, etc.
  - `video` - MP4, AVI, MOV, etc.
  - `audio` - MP3, WAV, etc.
  - `archive` - ZIP, TAR, etc.
  - `code` - Source code files
  - `data` - CSV, JSON, XML, etc.
  - `other` - Other file types
</ResponseField>

---

## File Status

<ResponseField name="status" type="string">
  Current file status:
  
  - `uploading` - File is being uploaded
  - `active` - File is available for use
  - `archived` - File is archived
  - `deleted` - File is marked for deletion
  - `error` - Error during upload or processing
</ResponseField>

---

## Error Responses

<AccordionGroup>
  <Accordion title="400 Bad Request">
    Invalid file or duplicate detected
    
    ```json
    {
      "error": {
        "type": "validation_error",
        "message": "File already exists (duplicate detected)",
        "details": {
          "existing_file_id": "file_123"
        }
      }
    }
    ```
  </Accordion>
  
  <Accordion title="403 Forbidden">
    Access denied to file
    
    ```json
    {
      "error": {
        "type": "permission_error",
        "message": "You do not have permission to access this file"
      }
    }
    ```
  </Accordion>
  
  <Accordion title="404 Not Found">
    File not found
    
    ```json
    {
      "error": {
        "type": "not_found",
        "message": "File not found"
      }
    }
    ```
  </Accordion>
  
  <Accordion title="413 Payload Too Large">
    File size exceeds limit
    
    ```json
    {
      "error": {
        "type": "file_too_large",
        "message": "File size exceeds maximum allowed size",
        "max_size": "100MB"
      }
    }
    ```
  </Accordion>
</AccordionGroup>
